<div class="settings-container">
  <!-- Header -->
  <div class="header">
    <h2>Settings</h2>
  </div>

  <!-- AI Model Section -->
  <mat-card class="settings-card">
    <mat-card-header>
      <mat-card-title>AI Model</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Model</mat-label>
        <mat-select [(value)]="selectedModel">
          @for (option of modelOptions(); track option.value) {
            <mat-option [value]="option.value">
              <div class="model-option">
                <mat-icon [class.cloud-icon]="option.provider === 'cloud'" [class.local-icon]="option.provider === 'local'">
                  {{ option.icon }}
                </mat-icon>
                <span>{{ option.label }}</span>
              </div>
            </mat-option>
          }
        </mat-select>
        <mat-hint>Select your AI model provider and version</mat-hint>
      </mat-form-field>

      <!-- OpenAI API Key -->
      @if (needsOpenAIKey()) {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>OpenAI API Key</mat-label>
          <input matInput type="password" [(ngModel)]="openaiApiKey" placeholder="sk-...">
          <mat-hint>Get your API key from platform.openai.com</mat-hint>
        </mat-form-field>
      }

      <!-- Claude API Key -->
      @if (needsClaudeKey()) {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Claude API Key</mat-label>
          <input matInput type="password" [(ngModel)]="claudeApiKey" placeholder="sk-ant-...">
          <mat-hint>Get your API key from console.anthropic.com</mat-hint>
        </mat-form-field>
      }

      <!-- Ollama Host -->
      @if (isOllamaModel()) {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Ollama Host</mat-label>
          <input matInput [(ngModel)]="ollamaHost" placeholder="http://localhost:11434">
          <mat-hint>Ollama server address</mat-hint>
        </mat-form-field>

        <mat-card class="info-card">
          <mat-card-content>
            <div class="info-content">
              <mat-icon class="info-icon">info</mat-icon>
              <div>
                <p><strong>Ollama (Recommended)</strong></p>
                <p class="small">Runs AI models locally on your machine. No API costs, full privacy.</p>
                <p class="small">Install: <a href="https://ollama.ai" target="_blank">ollama.ai</a></p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      }
    </mat-card-content>
  </mat-card>

  <!-- Output Directory Section -->
  <mat-card class="settings-card">
    <mat-card-header>
      <mat-card-title>Output Settings</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Output Directory</mat-label>
        <input matInput [(ngModel)]="outputDirectory" readonly>
        <button mat-icon-button matSuffix (click)="selectOutputDirectory()">
          <mat-icon>folder_open</mat-icon>
        </button>
        <mat-hint>Where generated metadata files will be saved</mat-hint>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <!-- Save Button -->
  <div class="save-section">
    <button mat-raised-button color="primary" class="save-button" (click)="saveSettings()">
      <mat-icon>save</mat-icon>
      Save Settings
    </button>
  </div>
</div>