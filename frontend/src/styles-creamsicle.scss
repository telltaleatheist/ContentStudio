/* ============================================================================
   OWEN MORGAN DESIGN SYSTEM - CREAMSICLE THEME
   ============================================================================ */

:root {
  --primary-orange: #ff6b35;
  --light-orange: #ff8c5a;
  --dark-orange: #e55529;
  --accent-orange: #ffa366;
  --peachy-orange: #ffb380;

  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #e9ecef;
  --bg-card: #ffffff;

  --text-primary: #212529;
  --text-secondary: #6c757d;
  --text-muted: #adb5bd;
  --border-color: #d1d5db;
  --shadow-color: rgba(0, 0, 0, 0.1);

  --border-radius: 8px;
  --border-radius-large: 12px;
  --transition: all 0.3s ease;
  --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;

  --shadow-sm: 0 1px 2px 0 var(--shadow-color);
  --shadow-md: 0 4px 6px -1px var(--shadow-color);
  --shadow-lg: 0 10px 15px -3px var(--shadow-color);
  --shadow-xl: 0 20px 25px -5px var(--shadow-color);
  --shadow-glow: 0 0 20px rgba(255, 107, 53, 0.3);

  // Gradients
  --gradient-primary: linear-gradient(135deg, #ff6b35 0%, #ffa366 100%);
  --gradient-secondary: linear-gradient(135deg, #ffa366 0%, #ffb380 100%);
  --gradient-flame: linear-gradient(135deg, #e55529 0%, #ff6b35 50%, #ffa366 100%);

  // Status colors
  --success-bg: #dcfce7;
  --success-text: #16a34a;
  --warning-bg: #fef3c7;
  --warning-text: #d97706;
  --danger-bg: #fee2e2;
  --danger-text: #dc2626;
  --info-bg: #dbeafe;
  --info-text: #2563eb;
}

/* Dark Theme */
[data-theme="dark"],
.dark-theme {
  --bg-primary: #0f0f0f;
  --bg-secondary: #1a1a1a;
  --bg-tertiary: #2d2d2d;
  --bg-card: #1e1e1e;
  --text-primary: #ffffff;
  --text-secondary: #d1d5db;
  --text-muted: #9ca3af;
  --border-color: #374151;
  --shadow-color: rgba(0, 0, 0, 0.5);
  --shadow-glow: 0 0 25px rgba(255, 107, 53, 0.4);

  // Brighter icons in sidebar
  .app-sidenav .mat-icon {
    color: #e5e7eb !important;
  }

  // Dark mode Material component overrides
  .mat-mdc-card {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-form-field {
    color: var(--text-primary) !important;

    .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,
    .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch,
    .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing {
      border-color: var(--border-color) !important;
    }

    .mdc-text-field--filled {
      background-color: var(--bg-secondary) !important;
    }

    input, textarea {
      color: var(--text-primary) !important;
    }

    .mat-mdc-floating-label {
      color: var(--text-secondary) !important;
    }
  }

  .mat-mdc-select {
    color: var(--text-primary) !important;

    .mat-mdc-select-value {
      color: var(--text-primary) !important;
    }

    .mat-mdc-select-arrow {
      color: var(--text-primary) !important;
    }
  }

  .mat-mdc-option {
    color: var(--text-primary) !important;
    background-color: var(--bg-card) !important;

    &:hover {
      background-color: var(--bg-secondary) !important;
    }

    &.mdc-list-item--selected {
      background-color: var(--bg-tertiary) !important;
    }
  }

  // Dropdown panel
  .mat-mdc-select-panel {
    background-color: var(--bg-card) !important;
  }

  .mat-mdc-autocomplete-panel {
    background-color: var(--bg-card) !important;
  }

  .mat-mdc-dialog-container {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-snack-bar-container {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-expansion-panel {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-expansion-panel-header {
    background: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-checkbox .mdc-checkbox__background {
    border-color: var(--text-secondary) !important;
  }

  .mat-mdc-text-field-wrapper {
    background: transparent !important;
  }

  .mat-mdc-checkbox .mdc-form-field label,
  .mat-mdc-checkbox .mdc-label,
  .mat-mdc-form-field .mdc-floating-label,
  .mat-mdc-form-field .mat-mdc-floating-label,
  .mat-mdc-select-value,
  .mat-mdc-select-arrow,
  .mat-mdc-form-field-hint-wrapper,
  .mat-hint {
    color: var(--text-primary) !important;
  }

  .mat-mdc-form-field .mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,
  .mat-mdc-form-field .mdc-text-field--outlined:not(.mdc-text-field--disabled) input,
  .mat-mdc-form-field .mdc-text-field--outlined:not(.mdc-text-field--disabled) textarea {
    color: var(--text-primary) !important;
  }

  .mat-expansion-panel-header-title,
  .mat-expansion-panel-header-description,
  .mat-mdc-option,
  .mat-mdc-option .mdc-list-item__primary-text,
  .mdc-list-item__primary-text,
  .mat-pseudo-checkbox {
    color: var(--text-primary) !important;
  }

  // Additional option text styling
  .mat-mdc-option .mat-option-text,
  .mat-mdc-option span {
    color: var(--text-primary) !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: var(--text-secondary) !important;
    opacity: 1;
  }

  // Sidenav dark mode
  .mat-drawer-container {
    background-color: var(--bg-primary) !important;
    color: var(--text-primary) !important;
  }

  .mat-drawer {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
  }

  .mat-drawer-content {
    background-color: var(--bg-primary) !important;
  }

  // List items dark mode
  .mat-mdc-list-item,
  .mdc-list-item {
    color: var(--text-primary) !important;
  }

  .mat-mdc-list-item .mdc-list-item__primary-text {
    color: var(--text-primary) !important;
  }

  // Dialog dark mode (for paste URLs modal and others)
  .mat-mdc-dialog-surface,
  .mdc-dialog__surface {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-dialog-title {
    color: var(--text-primary) !important;
  }

  .mat-mdc-dialog-content {
    color: var(--text-primary) !important;
  }

  .mat-mdc-dialog-actions {
    background-color: var(--bg-card) !important;
  }

  // Dialog buttons dark mode
  .mat-mdc-dialog-actions .mat-mdc-button,
  .mat-mdc-dialog-actions .mat-mdc-outlined-button,
  .mat-mdc-dialog-actions .mdc-button {
    color: var(--text-primary) !important;
    border-color: var(--border-color) !important;
  }

  .mat-mdc-outlined-button:not(:disabled) {
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
  }

  .mat-mdc-outlined-button:hover:not(:disabled) {
    background-color: var(--bg-secondary) !important;
  }

  // Stroked buttons in dark mode
  .mat-mdc-unelevated-button:not(.mat-primary):not(.mat-accent):not(.mat-warn),
  .mdc-button--outlined {
    border-color: var(--border-color) !important;
    color: var(--text-primary) !important;
  }

  // Fix emojis appearing black in dark mode
  .panel-title {
    color: var(--primary-orange) !important;

    // Ensure emojis don't inherit dark text color
    filter: none !important;
  }

  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary) !important;
  }

  // Material Table dark mode
  .mat-mdc-table,
  .history-table {
    background: #1e1e1e !important;
    color: #e0e0e0 !important;
  }

  .mat-mdc-header-cell,
  th[mat-header-cell] {
    background: #252525 !important;
    color: #e0e0e0 !important;
    border-bottom-color: #333333 !important;
  }

  .mat-mdc-cell,
  td[mat-cell] {
    color: #e0e0e0 !important;
    border-bottom-color: #333333 !important;
  }

  .mat-mdc-row:hover,
  tr[mat-row]:hover {
    background: #2a2a2a !important;
  }

  // Material Chips dark mode
  .mat-mdc-chip {
    background: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;

    .mat-mdc-chip-action-label {
      color: var(--text-primary) !important;
    }

    .mat-icon {
      color: var(--text-primary) !important;
    }
  }

  // Status chips in history table
  .status-chip {
    display: inline-flex !important;
    align-items: center !important;

    &.status-completed {
      background: rgba(76, 175, 80, 0.2) !important;
      color: #66bb6a !important;

      .mat-icon {
        color: #66bb6a !important;
      }
    }

    &.status-failed {
      background: rgba(244, 67, 54, 0.2) !important;
      color: #ef5350 !important;

      .mat-icon {
        color: #ef5350 !important;
      }
    }

    &.status-processing {
      background: rgba(33, 150, 243, 0.2) !important;
      color: #42a5f5 !important;

      .mat-icon {
        color: #42a5f5 !important;
      }
    }

    &.status-pending {
      background: rgba(255, 152, 0, 0.2) !important;
      color: #ffa726 !important;

      .mat-icon {
        color: #ffa726 !important;
      }
    }
  }

  // Fix button backgrounds in dark mode
  .mat-mdc-raised-button:not(.mat-mdc-button-disabled) {
    &.mat-primary {
      background-color: var(--primary-orange) !important;
      color: white !important;

      .mat-icon {
        color: white !important;
      }
    }
  }

  .mat-mdc-button:not(.mat-mdc-button-disabled) {
    color: #e0e0e0 !important;

    .mat-icon {
      color: #e0e0e0 !important;
    }
  }

  .mat-mdc-outlined-button:not(.mat-mdc-button-disabled),
  .mat-mdc-stroked-button:not(.mat-mdc-button-disabled) {
    color: #e0e0e0 !important;
    border-color: #666666 !important;

    .mat-icon {
      color: #e0e0e0 !important;
    }

    &:hover {
      background-color: rgba(255, 255, 255, 0.05) !important;
      border-color: var(--primary-orange) !important;
    }
  }

  .mat-mdc-icon-button:not(.mat-mdc-button-disabled) {
    color: #999999 !important;

    &:hover {
      background-color: rgba(255, 255, 255, 0.1) !important;
      color: #e0e0e0 !important;
    }

    .mat-icon {
      color: inherit !important;
    }

    &.mat-warn {
      color: #ef5350 !important;

      .mat-icon {
        color: #ef5350 !important;
      }

      &:hover {
        background-color: rgba(244, 67, 54, 0.15) !important;
      }
    }
  }

  // Material Menu dark mode
  .mat-mdc-menu-panel {
    background: #252525 !important;

    .mat-mdc-menu-content {
      background: #252525 !important;
    }

    .mat-mdc-menu-item {
      color: #e0e0e0 !important;

      &:hover {
        background: #2a2a2a !important;
      }

      .mat-icon {
        color: #999999 !important;
      }
    }
  }

  // Table container
  .table-container {
    background: #1e1e1e !important;
    border-color: #333333 !important;
  }
}

/* Fix placeholder overlap with Material floating label */
.mat-mdc-form-field:not(.mat-focused) input::placeholder,
.mat-mdc-form-field:not(.mat-focused) textarea::placeholder {
  opacity: 0;
}

/* Override Material Theme Colors - GRADIENT BUTTONS */
.mat-mdc-raised-button.mat-primary,
.mat-mdc-fab.mat-primary,
.mat-mdc-mini-fab.mat-primary,
.mat-mdc-unelevated-button.mat-primary {
  --mdc-protected-button-container-color: transparent !important;
  --mdc-protected-button-label-text-color: white !important;
  --mdc-filled-button-container-color: transparent !important;
  --mdc-filled-button-label-text-color: white !important;
  background: var(--gradient-primary) !important;
  color: white !important;
  box-shadow: var(--shadow-md) !important;
  transition: all 0.15s ease !important;
  position: relative;
  overflow: hidden;

  .mat-icon {
    color: white !important;
  }

  // Ripple effect on click
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.4s, height 0.4s;
  }

  &:active::before {
    width: 300px;
    height: 300px;
  }
}

.mat-mdc-raised-button.mat-primary:hover,
.mat-mdc-fab.mat-primary:hover,
.mat-mdc-mini-fab.mat-primary:hover,
.mat-mdc-unelevated-button.mat-primary:hover {
  --mdc-protected-button-container-color: transparent !important;
  --mdc-filled-button-container-color: transparent !important;
  background: var(--gradient-primary) !important;
  box-shadow: var(--shadow-lg), var(--shadow-glow) !important;
  transform: translateY(-2px) !important;
}

.mat-mdc-raised-button.mat-primary:active,
.mat-mdc-fab.mat-primary:active,
.mat-mdc-mini-fab.mat-primary:active,
.mat-mdc-unelevated-button.mat-primary:active {
  transform: translateY(0) !important;
}

.mat-mdc-raised-button.mat-accent {
  --mdc-protected-button-container-color: transparent !important;
  --mdc-protected-button-label-text-color: white !important;
  background: var(--gradient-secondary) !important;
}

.mat-toolbar.mat-primary {
  --mdc-elevated-card-container-color: transparent !important;
  background: var(--gradient-primary) !important;
  color: white !important;
  box-shadow: var(--shadow-md), 0 4px 12px rgba(255, 107, 53, 0.15) !important;
  border-bottom: none !important;

  .mat-icon {
    color: white !important;
  }

  button {
    color: white !important;
  }
}

.mat-icon.mat-primary {
  color: var(--primary-orange) !important;
}

// Apply design system to body
body {
  font-family: var(--font-family) !important;
  background: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

// FORCE full height layout - override Angular Material defaults
.mat-drawer-container {
  height: 100% !important;
  position: relative !important;
  width: 100% !important;
}

.mat-drawer-content {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  width: 100% !important;
  overflow-y: auto !important;

  // Make sure content fills the drawer
  > * {
    width: 100% !important;
    max-width: 100% !important;
  }
}

// Ensure router-outlet displays as flex
router-outlet {
  display: none !important;
  margin: 0 !important;
  padding: 0 !important;
  height: 0 !important;
  min-height: 0 !important;
}

router-outlet + * {
  flex: 1;
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 100%;
  margin: 0 !important;
  padding: 0 !important;
}

// Force router outlet to fill height
router-outlet + * {
  display: flex !important;
  flex: 1 !important;
  min-height: 0 !important;
}

/* ============================================================================
   CHECKBOX COLOR OVERRIDE - CREAMSICLE ORANGE
   ============================================================================ */

// Override Material checkbox colors to use orange theme
.mat-mdc-checkbox {
  // Unchecked state
  .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true]) ~ .mdc-checkbox__background {
    border-color: var(--text-secondary) !important;
  }

  // Checked state
  .mdc-checkbox__native-control:enabled:checked ~ .mdc-checkbox__background,
  .mdc-checkbox__native-control:enabled:indeterminate ~ .mdc-checkbox__background,
  .mdc-checkbox__native-control[data-indeterminate=true]:enabled ~ .mdc-checkbox__background {
    background-color: var(--primary-orange) !important;
    border-color: var(--primary-orange) !important;
  }

  // Hover state (unchecked)
  .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true]):hover ~ .mdc-checkbox__background {
    border-color: var(--primary-orange) !important;
  }

  // Ripple color
  .mat-mdc-checkbox-ripple .mat-ripple-element {
    background-color: var(--primary-orange) !important;
  }

  // Focus/hover overlay
  &.mat-mdc-checkbox-checked .mdc-checkbox__ripple,
  &.mat-primary .mdc-checkbox__ripple {
    background-color: var(--primary-orange) !important;
    opacity: 0.1;
  }

  // Label color
  label {
    color: var(--text-primary) !important;
  }
}

// Primary color override for checkboxes
.mat-mdc-checkbox.mat-primary {
  --mdc-checkbox-selected-checkmark-color: white !important;
  --mdc-checkbox-selected-focus-icon-color: var(--primary-orange) !important;
  --mdc-checkbox-selected-hover-icon-color: var(--primary-orange) !important;
  --mdc-checkbox-selected-icon-color: var(--primary-orange) !important;
  --mdc-checkbox-selected-pressed-icon-color: var(--primary-orange) !important;
  --mdc-checkbox-unselected-focus-icon-color: var(--text-secondary) !important;
  --mdc-checkbox-unselected-hover-icon-color: var(--primary-orange) !important;
}

/* ============================================================================
   CUSTOM SCROLLBAR - CREAMSICLE STYLE
   ============================================================================ */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 8px;
}

::-webkit-scrollbar-thumb {
  background: var(--primary-orange);
  border-radius: 8px;
  transition: background 0.2s ease;

  &:hover {
    background: var(--dark-orange);
  }
}

/* ============================================================================
   CARDS WITH GRADIENT HOVER
   ============================================================================ */

.mat-mdc-card {
  border-radius: var(--border-radius-large) !important;
  transition: all 0.3s ease !important;

  &:hover {
    box-shadow: var(--shadow-lg), 0 0 0 1px rgba(255, 107, 53, 0.1) !important;
  }
}

/* ============================================================================
   GRADIENT TEXT UTILITY
   ============================================================================ */

.gradient-text {
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ============================================================================
   INPUT FIELDS FOCUS STATE
   ============================================================================ */

.mat-mdc-form-field.mat-focused {
  .mdc-notched-outline__leading,
  .mdc-notched-outline__notch,
  .mdc-notched-outline__trailing {
    border-color: var(--primary-orange) !important;
    border-width: 2px !important;
  }

  .mat-mdc-floating-label {
    color: var(--primary-orange) !important;
  }
}

/* ============================================================================
   PROGRESS BAR - GRADIENT
   ============================================================================ */

.mat-mdc-progress-bar {
  --mdc-linear-progress-active-indicator-color: var(--primary-orange) !important;

  .mdc-linear-progress__bar-inner {
    background: var(--gradient-primary) !important;
    border-color: transparent !important;
  }
}

.mat-mdc-progress-spinner {
  --mdc-circular-progress-active-indicator-color: var(--primary-orange) !important;
}

/* ============================================================================
   SLIDER - CREAMSICLE
   ============================================================================ */

.mat-mdc-slider {
  --mdc-slider-handle-color: var(--primary-orange) !important;
  --mdc-slider-focus-handle-color: var(--primary-orange) !important;
  --mdc-slider-hover-handle-color: var(--dark-orange) !important;
  --mdc-slider-active-track-color: var(--primary-orange) !important;
  --mdc-slider-inactive-track-color: var(--bg-tertiary) !important;
  --mdc-slider-with-tick-marks-active-container-color: var(--primary-orange) !important;
}

/* ============================================================================
   TABS - GRADIENT INDICATOR
   ============================================================================ */

.mat-mdc-tab-group {
  .mat-mdc-tab-header {
    border-bottom: 1px solid var(--border-color);
  }

  .mat-mdc-tab:not(.mat-mdc-tab-disabled) {
    min-width: 160px;

    &.mdc-tab--active {
      .mdc-tab__text-label {
        color: var(--primary-orange) !important;
      }
    }

    .mdc-tab-indicator__content--underline {
      background: var(--gradient-primary) !important;
      border-color: transparent !important;
      height: 3px;
      border-radius: 3px 3px 0 0;
    }
  }
}
